# 40장 이벤트

### 1. 이벤트 드리븐 프로그래밍

- 이벤트란 브라우저가 처리해야 할 특정 사건을 감지하여 발생시키는 것이다.
- 이벤트가 발생했을 때 호출될 함수를 **이벤트 핸들러**라 한다.
- 이벤트가 발생했을 때 브라우저에게 이벤트 핸들러의 호출을 위임하는 것을 **이벤트 핸들러 등록**이라 한다.
- 프로그램의 흐름을 이벤트 중심으로 제어하는 프로그래밍 방식을 **이벤트 드리븐 프로그래밍**이라 한다.

### 2. 이벤트 타입

#### 2.1 마우스 이벤트

- click
  - 마우스 버튼을 클릭했을 때 발생
- mouseenter
  - 마우스 커서를 HTML 요소 안으로 이동했을 때 발생

#### 2.4 폼 이벤트

- submit
  - form 요소 내의 input에서 엔터 키를 눌렀을 때 발생 - form 요소 내의 submit 버튼을 눌렀을 때 발생

#### 2.5 값 변경 이벤트

- change
  - input, select, textarea 요소의 값이 변경되었을 때 발생

### 3. 이벤트 핸들러 등록

- 이벤트 핸들러 어트리뷰트 방식
  - 이벤트에 대응하는 HTML 요소의 어트리뷰트(ex. onclick, onchange)에 함수 호출문을 할당하여 등록한다.
  - 함수의 참조가 아닌 함수 호출문을 할당해야 한다.
- 이벤트 핸들러 프로퍼티 방식
  - window, Document, HTMLElement 타입의 DOM 노드 객체는 이벤트 핸들러 프로퍼티를 가지고 있다.(ex. button1.onclick, input2.onchange)
  - 이벤트 핸들러 프로퍼티에 함수를 바인딩하면 이벤트 핸들러가 등록된다.
- addEventListener 메서드 방식
  - EventTarget.prototype.addEventListener 메서드를 사용하여 이벤트 핸들러를 등록할 수 있다.
  - 첫 번째 인수로 이벤트, 두 번째 인수로 이벤트 핸들러를 전달한다.

### 4. 이벤트 핸들러 제거

- addEventListener 메서드로 등록한 이벤트 핸들러를 제거하려면 removeEventListener 메서드를 사용한다.
- removeEventListener 메서드에 전달할 인수는 addEventListener 메서드와 동일하다.
- 메서드에 전달한 인수가 일치하지 않으면 이벤트 핸들러는 제거되지 않는다. 즉, 이벤트 핸들러가 동일한 함수이어야 한다.(무명 함수인 경우 제거 불가)
- 이벤트 핸들러 프로퍼티 방식으로 등록한 이벤트 핸들러는 프로퍼티에 null을 할당하여 제거할 수 있다.

### 5. 이벤트 객체

- 이벤트가 발생하면 이벤트에 관련한 다양한 정보를 담고 있는 이벤트 객체가 동적으로 생성되어 이벤트 핸들러의 첫 번째 인수로 전달된다.
- 이벤트 객체를 전달받으려면 이벤트 핸들러를 정의할 때 이벤트 객체를 전달받을 매개변수를 명시적으로 선언해야 한다.(일반적으로 e 또는 event)

#### 5.2 이벤트 객체의 공통 프로퍼티

- target
  - 이벤트를 발생시킨 DOM 요소
- currentTarget
  - 이벤트 핸들러가 바인딩된 DOM 요소
- bubbles
  - 이벤트를 버블링으로 전파하는지 여부(ex. mouseenter는 false, mouseover는 true)

### 6. 이벤트 전파

- DOM 트리 상에 DOM 요소에서 발생한 이벤트는 DOM 트리를 통해 전파된다. 이를 이벤트 전파라고 한다.
- 이벤트 전파 단계
  - 캡처링 단계: 이벤트가 상위 요소에서 하위 요소 방향으로 전파
  - 타깃 단계: 이벤트가 이벤트 타깃에 도달
  - 버블링 단계: 이벤트가 하위 요소에서 상위 요소 방향으로 전파
- 캡처링 단계의 이벤트를 캐치하려면 addEventListener의 세 번째 인수로 true를 전달해야 한다.

### 7. 이벤트 위임

- 여러 개의 하위 DOM 요소에 각각 이벤트 핸들러를 등록하는 대신 하나의 상위 DOM 요소에 이벤트 핸들러를 등록하는 방법을 **이벤트 위임**이라 한다.
- 이벤트 위임을 통해 여러 개의 하위 DOM 요소에 이벤트 핸들러를 등록할 필요가 없고 동적으로 하위 DOM 요소를 추가하더라도 이벤트 핸들러를 등록할 필요가 없다.
- 이벤트 객체의 target 프로퍼티와 currentTarget 프로퍼티가 다른 DOM 요소를 가리킬 수 있다.

### 8. DOM 요소의 기본 동작 조작

#### 8.1 DOM 요소의 기본 동작 중단

- 이벤트 객체의 preventDefault 메서드는 DOM 요소의 기본 동작을 중단시킨다.(ex. form 요소 내 submit 이벤트가 발생 시 페이지 새로고침 방지)

#### 8.2 이벤트 전파 방지

- 이벤트 객체의 stopPropagation 메서드는 이벤트 전파를 중지시킨다.
- 하위 DOM 요소의 이벤트를 개별적으로 처리하기 위해 사용한다.

### 9. 이벤트 핸들러 내부의 this

- 이벤트 핸들러 어트리뷰트 방식
  - 이벤트 핸들러 내부의 this → 전역 객체 window
  - 이벤트 핸들러의 인수로 전달한 this → 이벤트를 바인딩한 DOM 요소
- 이벤트 핸들러 프로퍼티 방식과 addEventListener 메서드 방식
  - 이벤트를 바인딩한 DOM 요소

### 10. 이벤트 핸들러에 인수 전달

- 이벤트 핸들러 어트리뷰트 방식은 함수 호출문을 사용할 수 있기 때문에 인수를 전달할 수 있다.
- 이벤트 핸들러 프로퍼티 방식과 addEventListener 메서드 방식은 함수 호출문이 아닌 함수 자체(함수 객체에 대한 참조)를 등록해야 하므로 인수를 전달할 수 없다.
- 이벤트 핸들러 내부에서 함수를 호출하면서 인수를 전달하거나 이벤트 핸들러를 반환하는 함수를 호출하는 방법을 사용하면 된다.

```js
// 이벤트 핸들러에 함수 전달
input.onchange = handleChange;

// 이벤트 핸들러 내부에서 함수 호출
input.onchange = () => {
  handleChange(인수);
};

// 이벤트 핸들러를 반환하는 함수
const handleChange = (매개변수) => (e) => {
  // handleChange 함수...
};

// 이벤트 핸들러를 반환하는 함수 호출
input.onchange = handleChange(인수);
```
