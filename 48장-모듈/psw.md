# 48장 모듈

# 48.1 모듈의 일반적 의미

모듈이란 애플리케이션을 구성하는 개별적 요소로서 재사용 가능한 코드 조각을 말한다. 모듈은 기능을 기준으로 분리한다. 모듈은 자신만의 파일 스코프를 가질 수 있어야 한다.

모듈은 자신만의 파일 스코프를 가지기 때문에 모듈에 포함된 변수나 객체,함수 등의 자산은 다른 모듈에서 접근 할 수 없도록 비공개 상태이다. 모듈은 개별적 존재로서 애플리케이션과 분리되어 존재한다.

모듈의 자산은 기본적으로 비공개지만 공개가 필요한 자산에 한해 공개가 가능하다. 이를 export 라 하며 공개된 자산을 자신의 스코프 내로 불러들이는 것은 import라고 한다.

# 48.2 자바스크립트와 모듈

자바스크립트는 태생적 한계로 인해 모듈 시스템을 지원하지 않는다.

하지만 자바스크립트의 사용 범위가 넓어짐에 따라 모듈 시스템의 필요성이 대두되었고 CommomJS 와 AMD 두 시스템 중 하나로 구현이 가능 해 졌다. Node.JS 환경에서는 CommonJS를 채택하여 모듈 시스템을 지원한다.

# 48.3 ES6 모듈(ESM)

ES6에서 클라이언트 사이드 자바스크립트에서도 작동하는 모듈 기능이 추가되었다. script 태크에 type=”module” 어트리뷰트를 추가하면 된다. 로드된 자바스크립트 파일은 모듈로서 작동하기 때문에 이 자바스크립트 파일의 확장자는 .mjs여야 한다.

ESM은 독자적인 모듈 스코프를 갖는다. 일반적으로 코드 내에서 전역에 var키워드로 선언하게 되면 전역 객체의 프로퍼티가 되어 전역 변수가 되지만 모듈 내에서 var 키워드로 변수를 선언하게 되면 전역 변수가 아니게 된다.

모듈의 자산을 외부에 공개한는 키워드는 export 이다. 함수,변수 등의 선언문 앞에 붙여 사용하며 export할 자산이 많다면 모든 자산을 묶어 객체로 만든 후 한번에 export하는 것도 가능하다.

그 후 해당 자산들을 다른 모듈에서도 접근 할 수 있다. 이를 import라고 한다. export한 모듈에서 사용한 식별자 이름으로 import해야 하며 ESM의 경우 확장자를 생략 할 수 없다.
